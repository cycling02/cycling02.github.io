<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>BaiYun</title><meta name="author" content="Li Hua"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><meta name="generator" content="Hexo 7.2.0"></head><body><header id="page_header"><div class="header_wrap"><div id="blog_name"><a class="blog_title" id="site-name" href="/">BaiYun</a></div><button class="menus_icon"><div class="navicon"></div></button><ul class="menus_items"><li class="menus_item"><a class="site-page" href="/#Publications"> Publications</a></li><li class="menus_item"><a class="site-page" href="/"> About</a></li><li class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div></header><main id="page_main"><div class="side-card sticky"><div class="card-wrap" itemscope itemtype="http://schema.org/Person"><div class="author-avatar"><img class="avatar-img" src="/themes/Academia/source/img/profile.jpg" onerror="this.onerror=null;this.src='/img/profile.png'" alt="avatar"></div><div class="author-discrip"><h3>Li Hua</h3><p class="author-bio">Your biography can be writed down here.</p></div><div class="author-links"><button class="btn m-social-links">Links</button><ul class="social-icons"><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-github" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-weixin" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-rss" aria-hidden="true"></i></a></li></ul><ul class="social-links"><li><a class="e-social-link" href="/" target="_blank"><i class="fas fa-graduation-cap" aria-hidden="true"></i><span>Google Scholar</span></a></li><li><a class="e-social-link" href="/" target="_blank"><i class="fab fa-orcid" aria-hidden="true"></i><span>ORCID</span></a></li></ul></div><a class="cv-links" href="/attaches/CV.pdf" target="_blank"><i class="fas fa-file-pdf" aria-hidden="true"><span>My Detail CV.</span></i></a></div></div><div class="page" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="page-title">Wiki.js搭建</h2><article><p>&#x3D;&#x3D;转载，仅供个人学习！！！&#x3D;&#x3D;</p>
<h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h2><p>Wiki.js是一个现代化、开源的wiki应用程序，它基于Node.js构建，旨在提供强大、美观且高度可定制的知识管理解决方案。以下是Wiki.js的一些主要特点，特别是在使用Docker进行部署时的优势：</p>
<ol>
<li><strong>容器化部署</strong>：通过Docker部署Wiki.js，你可以享受到快速、一致且跨平台的部署体验。Docker镜像确保了运行环境的一致性，无论是Linux、macOS还是Windows系统，都能轻松启动Wiki.js，无需担心底层环境差异带来的配置问题。</li>
<li><strong>美观的界面</strong>：Wiki.js以其优雅且用户友好的界面著称，提供了出色的阅读和编辑体验。支持Markdown编辑，让文档编写既简单又高效。</li>
<li><strong>强大的搜索引擎</strong>：内置的全文搜索引擎确保用户能够快速找到所需的信息，提升知识库的可用性。</li>
<li><strong>多用户与权限管理</strong>：支持多用户登录和精细的权限控制系统，可以设置不同的访问权限给不同的用户或用户组，适合团队协作和知识共享。</li>
<li><strong>插件与扩展性</strong>：Wiki.js具有高度的可扩展性，允许通过插件系统来增加额外功能，满足特定需求，比如支持LDAP认证、备份与恢复等。</li>
<li><strong>外部数据库支持</strong>：虽然可以使用内置的数据库解决方案，但Wiki.js还支持连接到外部的PostgreSQL、MySQL、MariaDB或MongoDB等数据库，以适应不同的部署需求和规模。</li>
<li><strong>Markdown与富文本编辑</strong>：兼容Markdown和富文本编辑器，适应不同用户的编辑习惯，同时保持文档的结构化和易于维护。</li>
<li><strong>版本控制与修订历史</strong>：自动跟踪文档的所有更改，用户可以查看和回滚到之前的任何一个版本，确保知识的完整性和可追溯性。</li>
<li><strong>易于安装与升级</strong>：使用Docker部署Wiki.js，只需简单的Docker命令即可完成安装和更新过程，降低了维护成本。</li>
<li><strong>社区支持与活跃开发</strong>：作为一个开源项目，Wiki.js拥有活跃的开发者和用户社区，持续接收贡献，修复问题并推出新功能，确保软件的稳定性和创新性。</li>
</ol>
<h2 id="2-项目展示"><a href="#2-项目展示" class="headerlink" title="2. 项目展示"></a>2. 项目展示</h2><p>GitHub原项目地址：<a target="_blank" rel="noopener" href="https://github.com/Requarks/wiki">https://github.com/Requarks/wiki</a></p>
<p>官网地址：<a target="_blank" rel="noopener" href="https://js.wiki/">https://js.wiki/</a></p>
<p>官方文档地址：<a target="_blank" rel="noopener" href="https://docs.requarks.io/">https://docs.requarks.io/</a></p>
<p>本教程用的镜像：<a target="_blank" rel="noopener" href="https://hub.docker.com/r/linuxserver/wikijs">https://hub.docker.com/r/linuxserver/wikijs</a></p>
<p>Demo:<a target="_blank" rel="noopener" href="https://docs.requarks.io/">https://docs.requarks.io/</a></p>
<h2 id="3-搭建环境"><a href="#3-搭建环境" class="headerlink" title="3. 搭建环境"></a>3. 搭建环境</h2><p>系统：Debian 10（DD脚本 非必需DD用原来的系统也OK）</p>
<p>域名一枚，并做好解析到服务器上</p>
<p>安装好Docker、Docker-compose（相关脚本）</p>
<p>安装好Nginx Proxy Manager（相关教程）</p>
<h2 id="4-搭建方式"><a href="#4-搭建方式" class="headerlink" title="4. 搭建方式"></a>4. 搭建方式</h2><h3 id="4-1-搭建"><a href="#4-1-搭建" class="headerlink" title="4.1 搭建"></a>4.1 搭建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo -i # 切换到root用户</span><br><span class="line"></span><br><span class="line">apt update -y # 升级packages</span><br><span class="line"></span><br><span class="line">	apt install wget curl sudo vim git # Debian系统比较干净，安装常用的软件</span><br></pre></td></tr></table></figure>

<hr>
<p>创建一下安装的目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /root/data/docker_data/wikijs</span><br><span class="line"></span><br><span class="line">cd /root/data/docker_data/wikijs</span><br><span class="line"></span><br><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure>

<p>docker-compose.yml填入以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;2.1&quot;</span><br><span class="line">services:</span><br><span class="line">  wikijs:</span><br><span class="line">    image: lscr.io/linuxserver/wikijs</span><br><span class="line">    container_name: wikijs</span><br><span class="line">    environment:</span><br><span class="line">      - PUID=1000        # 如何查看当前用户的PUID和PGID，直接命令行输入id就行</span><br><span class="line">      - PGID=1000</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">    volumes:</span><br><span class="line">      - /root/data/docker_data/wikijs/config:/config  # 配置文件映射到本地，数据不会因为Docker停止而丢失</span><br><span class="line">      - /root/data/docker_data/wikijs/data:/data  # 数据映射到本地，数据不会因为Docker停止而丢失</span><br><span class="line">    ports:</span><br><span class="line">      - 8080:3000   # 左边的8080可以自己调整端口号，右边的3000不要改</span><br><span class="line">    restart: unless-stopped</span><br></pre></td></tr></table></figure>

<hr>
<p>没问题的话，ctrl+x退出，按y保存，enter确认。</p>
<p>然后运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>访问：&#x3D;&#x3D;http:服务ip:8080 即可。&#x3D;&#x3D;</p>
<hr>
<p>注意：</p>
<p>1、不知道服务器IP，可以直接在命令行输入：curl <a target="_blank" rel="noopener" href="http://ip.sb/">ip.sb</a>，会显示当前服务器的IP。</p>
<p>2、遇到访问不了的情况，请在宝塔面板的防火墙和服务商的后台防火墙里打开对应端口。</p>
<hr>
<h3 id="4-2-更新"><a href="#4-2-更新" class="headerlink" title="4.2 更新"></a>4.2 更新</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cp -r /root/data/docker_data/wikijs /root/data/docker_data/wikijs.archive # 万事先备份，以防万一</span><br><span class="line"></span><br><span class="line">cd /root/data/docker_data/wikijs # 进入docker-compose所在的文件夹</span><br><span class="line"></span><br><span class="line">docker-compose pull # 拉取最新的镜像</span><br><span class="line"></span><br><span class="line">docker-compose up -d # 重新更新当前镜像</span><br></pre></td></tr></table></figure>

<blockquote>
</blockquote>
<p>利用Docker-compose搭建的应用，更新非常容易～</p>
<hr>
<h3 id="4-3-卸载"><a href="#4-3-卸载" class="headerlink" title="4.3 卸载"></a>4.3 卸载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /root/data/docker_data/wikijs # 进入docker-compose所在的文件夹</span><br><span class="line"></span><br><span class="line">docker-compose down # 停止容器，此时不会删除映射到本地的数据</span><br><span class="line"></span><br><span class="line">rm -rf /root/data/docker_data/wikijs # 完全删除映射到本地的数据</span><br></pre></td></tr></table></figure>

<p>此时，执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -al</span><br></pre></td></tr></table></figure>

<p>可以看到三个文件夹，config、 data、 docker-compose.yml</p>
<hr>
<p>如果想要删除配置文件和数据，重新搭建的话，执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -rf config/</span><br><span class="line"></span><br><span class="line">rm -rf data/</span><br></pre></td></tr></table></figure>

<p>如果想要全部删除的话，执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd .. # 退回到/root/data/docker_data目录</span><br><span class="line"></span><br><span class="line">rm -rf /root/data/docker_data/wikijs # 完全删除映射到本地的数据</span><br></pre></td></tr></table></figure></article></div></main><div class="nav-wrap"><div class="nav"><button class="site-nav"><div class="navicon"></div></button><ul class="nav_items"><li class="nav_item"><a class="nav-page" href="/#Publications"> Publications</a></li><li class="nav_item"><a class="nav-page" href="/"> About</a></li><li class="nav_item"><a class="nav-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div><div class="cd-top"><i class="fa fa-arrow-up" aria-hidden="true"></i></div></div><footer id="page_footer"><div class="footer_wrap"><div class="copyright">&copy;2023 - 2024 by Li Hua</div><div class="theme-info">Powered by <a target="_blank" href="https://hexo.io" rel="nofollow noopener">Hexo</a> & <a target="_blank" href="https://github.com/PhosphorW/hexo-theme-academia" rel="nofollow noopener">Academia Theme</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery-pjax@latest/jquery.pjax.min.js"></script><script src="/js/main.js"></script></body></html>