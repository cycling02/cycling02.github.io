<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>BaiYun</title><meta name="author" content="Li Hua"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><meta name="generator" content="Hexo 7.2.0"></head><body><header id="page_header"><div class="header_wrap"><div id="blog_name"><a class="blog_title" id="site-name" href="/">BaiYun</a></div><button class="menus_icon"><div class="navicon"></div></button><ul class="menus_items"><li class="menus_item"><a class="site-page" href="/#Publications"> Publications</a></li><li class="menus_item"><a class="site-page" href="/"> About</a></li><li class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div></header><main id="page_main"><div class="side-card sticky"><div class="card-wrap" itemscope itemtype="http://schema.org/Person"><div class="author-avatar"><img class="avatar-img" src="/themes/Academia/source/img/profile.jpg" onerror="this.onerror=null;this.src='/img/profile.png'" alt="avatar"></div><div class="author-discrip"><h3>Li Hua</h3><p class="author-bio">Your biography can be writed down here.</p></div><div class="author-links"><button class="btn m-social-links">Links</button><ul class="social-icons"><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-github" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-weixin" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-rss" aria-hidden="true"></i></a></li></ul><ul class="social-links"><li><a class="e-social-link" href="/" target="_blank"><i class="fas fa-graduation-cap" aria-hidden="true"></i><span>Google Scholar</span></a></li><li><a class="e-social-link" href="/" target="_blank"><i class="fab fa-orcid" aria-hidden="true"></i><span>ORCID</span></a></li></ul></div><a class="cv-links" href="/attaches/CV.pdf" target="_blank"><i class="fas fa-file-pdf" aria-hidden="true"><span>My Detail CV.</span></i></a></div></div><div class="page" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="page-title">整理一些常用的脚本</h2><article><p>Halo 2.0是一款基于Spring Boot和Vue.js框架构建的现代化开源内容管理系统（CMS），专为个人博客及小型网站设计。作为一款开源软件，Halo不仅代码开放，而且完全免费，这意味着用户可以自由地查看、修改源代码以适应个性化需求，同时也能够享受到社区的支持和持续的更新。</p>
<h2 id="Halo-2-0的一些显著特点："><a href="#Halo-2-0的一些显著特点：" class="headerlink" title="Halo 2.0的一些显著特点："></a>Halo 2.0的一些显著特点：</h2><ol>
<li><strong>快速启动与轻量级</strong>：借助Docker容器化技术，Halo 2.0可以迅速启动，资源占用小，非常适合快速搭建个人博客。容器化的部署方式确保了环境的一致性，无论在本地开发还是云端部署都能保持相同的运行效果。</li>
<li><strong>高性能与高效率</strong>：利用Docker的高效资源利用能力，Halo能够在低资源消耗的前提下提供稳定的性能表现。其背后的技术栈如Spring Boot和Vue.js，都是为提高开发效率和运行时性能而精心选择的。</li>
<li><strong>现代化技术栈</strong>：采用Spring Boot作为后端框架，保证了应用的快速开发与部署能力，同时Vue.js作为前端框架，提供了流畅的用户交互体验和响应式设计，使得网站在不同设备上都能有良好的展示效果。</li>
<li><strong>易部署与维护</strong>：通过Docker部署，用户可以轻松地在任何支持Docker的系统上部署Halo，极大地简化了环境配置的复杂度。Docker Compose的使用更是使得多服务协作变得简单，一键即可完成整个博客系统的搭建与配置。</li>
<li><strong>模块化与可扩展性</strong>：Halo设计上支持插件和主题的扩展，用户可以根据需要安装各种功能插件或更换界面主题，以丰富博客的功能和个性化外观。</li>
<li><strong>云原生友好</strong>：作为云原生时代的产品，Halo 2.0对云环境有着良好的支持，便于在云服务商上部署和运维，支持自动扩缩容等高级特性。</li>
<li><strong>社区活跃与文档齐全</strong>：拥有活跃的开发者社区，不断更新的文档和示例，即使是初学者也能快速上手，遇到问题时容易找到帮助。</li>
</ol>
<h2 id="2-项目展示"><a href="#2-项目展示" class="headerlink" title="2. 项目展示"></a>2. 项目展示</h2><p>文档地址：<a target="_blank" rel="noopener" href="http://docs.halo.run/" title="http://docs.halo.run/"></a><a target="_blank" rel="noopener" href="http://docs.halo.run/" title="http://docs.halo.run/">http://docs.halo.run/</a><br>社区地址：<a target="_blank" rel="noopener" href="https://bbs.halo.run/" title="https://bbs.halo.run/"></a><a target="_blank" rel="noopener" href="https://bbs.halo.run/" title="https://bbs.halo.run/">https://bbs.halo.run/</a><br>官网地址：<a target="_blank" rel="noopener" href="https://halo.run/" title="https://halo.run/"></a><a target="_blank" rel="noopener" href="https://halo.run/" title="https://halo.run/">https://halo.run/</a><br>GitHub地址：<a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo" title="https://github.com/halo-dev/halo"></a><a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo" title="https://github.com/halo-dev/halo">https://github.com/halo-dev/halo</a><br>Demo地址：<a target="_blank" rel="noopener" href="https://demo.halo.run/" title="https://demo.halo.run/"></a><a target="_blank" rel="noopener" href="https://demo.halo.run/" title="https://demo.halo.run/">https://demo.halo.run</a><br>Demo后台：<a target="_blank" rel="noopener" href="https://demo.halo.run/console" title="https://demo.halo.run/console"></a><a target="_blank" rel="noopener" href="https://demo.halo.run/console" title="https://demo.halo.run/console">https://demo.halo.run/console</a><br>用户名：<code>demo</code><br>密码：<a href="mailto:code%3EP@ssw0rd123..%3C/code" title="mailto:code%3EP@ssw0rd123..%3C/code">code&gt;P@ssw0rd123..</a></p>
<p><a href="mailto:code%3EP@ssw0rd123..%3C/code" title="mailto:code%3EP@ssw0rd123..%3C/code">注意：<code>docker-compose.yml</code> 里面的<code>--halo.external-url=</code></a><code>[http://localhost:8090/](http://localhost:8090/)</code> ，其中的<code>[http://localhost:8090/](http://localhost:8090/)</code>需要更改为你的域名，如果你打算用的域名是<code>abc.com</code>也就是要改成<code>--halo.external-url=[https://abc.com](https://abc.com/)</code></p>
<p>版本号<code>2.6.0</code>，可以看这边：<a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo/releases" title="https://github.com/halo-dev/halo/releases"></a><a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo/releases" title="https://github.com/halo-dev/halo/releases">https://github.com/halo-dev/halo/releases</a> 保证自己是新版本～</p>
<p>接着，千万记得改密码！！！</p>
<p>不然，你也会像这样：</p>
<p><a target="_blank" rel="noopener" href="https://img.laoda.de/i/2023/03/09/r8ovzn-0.webp" title="https://img.laoda.de/i/2023/03/09/r8ovzn-0.webp"><img src="https://iwanlab.com/docker-compose-install-halo-version-2/75799c30a3a90bd3e5dc2d6f3c6286d4.png">  
</a></p>
<p>PS：细心的小伙伴会发现，<code>docker-compose.yml</code>里面数据库<code>3306</code>并没有写成<code>3306:3306</code>，官网是写的后者，咕咕改成了前者，为的就是不在公网暴露halo数据库的端口，这样也能一定程度保障博客的安全。</p>
<p>以下是详细搭建教程。</p>
<h2 id="3-搭建环境"><a href="#3-搭建环境" class="headerlink" title="3. 搭建环境"></a>3. 搭建环境</h2><ul>
<li>系统：Debian 10 （<a target="_blank" rel="noopener" href="https://blog.laoda.de/archives/useful-script#dd%E7%9B%B8%E5%85%B3" title="https://blog.laoda.de/archives/useful-script#dd%E7%9B%B8%E5%85%B3">DD 脚本</a> 非必需 DD，用原来的系统也 OK，之后教程都是用 Debian 或者 Ubuntu 搭建～）</li>
<li>安装好 Docker、Docker-compose（<a target="_blank" rel="noopener" href="https://blog.laoda.de/archives/hello-docker#5%E5%AE%89%E8%A3%85dockerdocker-compose" title="https://blog.laoda.de/archives/hello-docker#5%E5%AE%89%E8%A3%85dockerdocker-compose">相关脚本</a>）</li>
<li>【非必需但建议】域名一枚，并做好解析到服务器上（<a target="_blank" rel="noopener" href="https://blog.laoda.de/archives/namesilo" title="https://blog.laoda.de/archives/namesilo">域名购买、域名解析</a> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Sy4y1k7kZ/" title="https://www.bilibili.com/video/BV1Sy4y1k7kZ/">视频教程</a>）</li>
<li>【非必需】提前安装好宝塔面板海外版本 aapanel，并安装好 Nginx（<a target="_blank" rel="noopener" href="https://forum.aapanel.com/d/9-aapanel-linux-panel-6812-installation-tutorial" title="https://forum.aapanel.com/d/9-aapanel-linux-panel-6812-installation-tutorial">安装地址</a>）</li>
<li>【非必需本教程选用】安装好 Nginx Proxy Manager（<a target="_blank" rel="noopener" href="https://blog.laoda.de/archives/nginxproxymanager" title="https://blog.laoda.de/archives/nginxproxymanager">相关教程</a>）</li>
</ul>
<blockquote>
<p>服务器要求：内存建议1G 以上，硬盘可以大一些。</p>
</blockquote>
<h2 id="4-搭建视频"><a href="#4-搭建视频" class="headerlink" title="4. 搭建视频"></a>4. 搭建视频</h2><p>视频地址：<a target="_blank" rel="noopener" href="https://www.bilibili.com/BV1wk4y1h7Ma" title="https://www.bilibili.com/BV1wk4y1h7Ma"></a><a target="_blank" rel="noopener" href="https://www.bilibili.com/BV1wk4y1h7Ma" title="https://www.bilibili.com/BV1wk4y1h7Ma">https://www.bilibili.com/BV1wk4y1h7Ma</a></p>
<h2 id="5-搭建方式"><a href="#5-搭建方式" class="headerlink" title="5. 搭建方式"></a>5. 搭建方式</h2><p>创建一下安装的目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line"></span><br><span class="line">mkdir -p /root/data/docker_data/halo</span><br><span class="line">cd /root/data/docker_data/halo</span><br><span class="line"></span><br><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure>

<p>这边我们直接用 docker 的方式安装。</p>
<p>英文输入法下，按 <code>i</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  halo:</span><br><span class="line">    image: halohub/halo:2.10.0</span><br><span class="line">    container_name: halo</span><br><span class="line">    restart: on-failure:3</span><br><span class="line">    depends_on:</span><br><span class="line">      halodb:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    networks:</span><br><span class="line">      halo_network:</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/root/.halo2</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8080:8090&quot; #左边端口随便改</span><br><span class="line">    command:</span><br><span class="line">      - --spring.r2dbc.url=r2dbc:pool:mysql://halodb:3306/halo</span><br><span class="line">      - --spring.r2dbc.username=root</span><br><span class="line">      </span><br><span class="line">      - --spring.r2dbc.password=o#DwN&amp;JSa56</span><br><span class="line">      - --spring.sql.init.platform=mysql</span><br><span class="line">      </span><br><span class="line">      - --halo.external-url=https://www.example.com</span><br><span class="line">      </span><br><span class="line">      - --halo.security.initializer.superadminusername=admin</span><br><span class="line">      </span><br><span class="line">      - --halo.security.initializer.superadminpassword=P@88w0rd</span><br><span class="line"></span><br><span class="line">  halodb:</span><br><span class="line">    image: mysql:8.0.31</span><br><span class="line">    container_name: halodb</span><br><span class="line">    restart: on-failure:3</span><br><span class="line">    networks:</span><br><span class="line">      halo_network:</span><br><span class="line">    command: </span><br><span class="line">      - --default-authentication-plugin=mysql_native_password</span><br><span class="line">      - --character-set-server=utf8mb4</span><br><span class="line">      - --collation-server=utf8mb4_general_ci</span><br><span class="line">      - --explicit_defaults_for_timestamp=true</span><br><span class="line">    volumes:</span><br><span class="line">      - ./mysql:/var/lib/mysql</span><br><span class="line">      - ./mysqlBackup:/data/mysqlBackup</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;3306&quot;</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: [&quot;CMD&quot;, &quot;mysqladmin&quot;, &quot;ping&quot;, &quot;-h&quot;, &quot;127.0.0.1&quot;, &quot;--silent&quot;]</span><br><span class="line">      interval: 3s</span><br><span class="line">      retries: 5</span><br><span class="line">      start_period: 30s</span><br><span class="line">    environment:</span><br><span class="line">      </span><br><span class="line">      - MYSQL_ROOT_PASSWORD=o#DwN&amp;JSa56</span><br><span class="line">      - MYSQL_DATABASE=halo</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  halo_network:</span><br></pre></td></tr></table></figure>

<p>注意：<code>docker-compose.yml</code> 里面的<code>--halo.external-url=[http://localhost:8090/](http://localhost:8090/)</code> ，其中的<code>[http://localhost:8090/](http://localhost:8090/)</code>需要更改为你的域名，如果你打算用的域名是<code>abc.com</code>也就是要改成<code>--halo.external-url=[https://abc.com](https://abc.com/)</code></p>
<p>版本号<code>2.6.0</code>，可以看这边：<a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo/releases" title="https://github.com/halo-dev/halo/releases"></a><a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo/releases" title="https://github.com/halo-dev/halo/releases">https://github.com/halo-dev/halo/releases</a> 保证自己是新版本～</p>
<p>接着，千万记得改密码！！！<br>PS：细心的小伙伴会发现，<code>docker-compose.yml</code>里面数据库<code>3306</code>并没有写成<code>3306:3306</code>，官网是写的后者，咕咕改成了前者，为的就是不在公网暴露halo数据库的端口，这样也能一定程度保障博客的安全。</p>
<p>修改好之后，注意切换成英文输入法，然后按一下 <code>esc</code>，然后 <code>:wq</code> 保存退出。</p>
<h3 id="5-3-打开服务器防火墙（非必需）并访问网页"><a href="#5-3-打开服务器防火墙（非必需）并访问网页" class="headerlink" title="5.3 打开服务器防火墙（非必需）并访问网页"></a>5.3 打开服务器防火墙（非必需）并访问网页</h3><p>打开防火墙的端口 <code>8090</code></p>
<p>举例，腾讯云打开方法如下（部分服务商没有自带的面板防火墙，就不用这步操作了）：</p>
<p>图中示例填的是 <code>5230</code>，备注填的是 <code>memos</code>，这边我们填 <code>8090</code>，示例填 <code>halo</code> ，确定即可（如果你在 docker-compose 文件里换了 <code>9009</code>，这边就需要填 <code>9009</code>，以此类推）<br>查看端口是否被占用（以 <code>8090</code> 为例），输入：</p>
<p>如果啥也没出现，表示端口未被占用，我们可以继续下面的操作了～</p>
<p>如果出现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-bash: lsof: command not found</span><br></pre></td></tr></table></figure>

<p>运行：</p>
<p>如果端口没有被占用（被占用了就修改一下端口，比如改成 <code>8081</code>，注意 docker 命令行里和防火墙都要改）</p>
<p>最后：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /root/data/docker_data/halo    </span><br><span class="line"></span><br><span class="line">docker-compose up -d </span><br></pre></td></tr></table></figure>

<p>理论上我们就可以输入 <code>[http://ip:8090](http://ip:8090/)</code> 访问安装了。</p>
<blockquote>
<p><strong>注意：</strong></p>
<p>1、不知道服务器 IP，可以直接在命令行输入：<code>curl ip.sb</code>，会显示当前服务器的 IP。</p>
<p>2、遇到访问不了的情况，请再次检查在宝塔面板的防火墙和服务商的后台防火墙是否打开对应了端口。</p>
</blockquote>
<p>有的小伙伴可能想搭建起来分享给其他人使用，如果后续想要分享给别人，IP + 端口太不优雅了，咕咕建议大家还是搞一个域名，容易记，看起来也更正规一点。这样可以做 https，会让网页更安全。</p>
<p>我们接着往下看！</p>
<h3 id="5-4-更新-halo"><a href="#5-4-更新-halo" class="headerlink" title="5.4 更新 halo"></a>5.4 更新 halo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cd /root/data/docker_data/halo</span><br><span class="line"></span><br><span class="line">docker-compose down </span><br><span class="line"></span><br><span class="line">cp -r /root/data/docker_data/halo /root/data/docker_data/halo.archive  </span><br><span class="line"></span><br><span class="line">docker-compose pull</span><br><span class="line"></span><br><span class="line">docker-compose up -d    </span><br><span class="line"></span><br><span class="line">docker image prune  </span><br></pre></td></tr></table></figure>

<p>提示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WARNING! This will remove all dangling images.</span><br><span class="line">Are you sure you want to continue? [y/N] </span><br></pre></td></tr></table></figure>

<p>输入 <code>y</code></p>
<p>利用 Docker 搭建的应用，更新非常容易～</p>
<h3 id="5-5-卸载-halo"><a href="#5-5-卸载-halo" class="headerlink" title="5.5 卸载 halo"></a>5.5 卸载 halo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /root/data/docker_data/halo</span><br><span class="line"></span><br><span class="line">docker-compose down</span><br><span class="line"></span><br><span class="line">cd ..</span><br><span class="line"></span><br><span class="line">rm -rf /root/data/docker_data/halo  </span><br></pre></td></tr></table></figure>

<p>可以卸载得很干净。</p>
<h2 id="6-反向代理"><a href="#6-反向代理" class="headerlink" title="6. 反向代理"></a>6. 反向代理</h2><p>我们要用域名而不是IP+端口的方式来访问我们的服务！</p>
<h3 id="6-1-利用-Nginx-Proxy-Manager"><a href="#6-1-利用-Nginx-Proxy-Manager" class="headerlink" title="6.1 利用 Nginx Proxy Manager"></a>6.1 利用 Nginx Proxy Manager</h3><p>在添加反向代理之前，确保你已经完成了域名解析，不会的可以看这个：<strong>域名一枚，并做好解析到服务器上</strong></p>
<p>[<img src="file://C:/Users/25082/.config/joplin-desktop/resources/5110c0b7d77a458ab42d1dc481e00778.webp?t=1696908655554"><br>之后，登陆 Nginx Proxy Manager</p>
<blockquote>
<p><strong>注意：</strong></p>
<p>Nginx Proxy Manager（以下简称 NPM）会用到 <code>80</code>、<code>443</code> 端口，所以本机不能占用（比如原来就有 Nginx）</p>
</blockquote>
<p>直接丢几张图：</p>
<blockquote>
<p>注意填写对应的 <code>域名</code>、<code>IP</code> 和 <code>端口</code>，按文章来的话，应该是 <code>8090</code></p>
</blockquote>
<p><strong>IP 填写：</strong></p>
<p>如果 Nginx Proxy Manager 和 halo 在同一台服务器上，可以在终端输入：</p>
<p>查看对应的 Docker 容器内部 IP。</p>
<p><a target="_blank" rel="noopener" href="https://img.laoda.de/i/2022/09/29/pcdnz5-2.webp" title="https://img.laoda.de/i/2022/09/29/pcdnz5-2.webp"><img src="file://C:/Users/25082/.config/joplin-desktop/resources/f14cb29ac68a4d9eb9fef3fad1bf3282.webp?t=1696908655577">  
</a></p>
<p>否则直接填 <code>halo</code> 所在的服务器 IP 就行。</p>
<p>注意：<code>docker-compose.yml</code> 里面的<code>--halo.external-url=[http://localhost:8090/](http://localhost:8090/)</code> ，其中的<code>[http://localhost:8090/](http://localhost:8090/)</code>需要更改为你的域名，如果你的域名是<code>abc.com</code>也就是要改成<code>--halo.external-url=[https://abc.com](https://abc.com/)</code></p>
<h3 id="6-2-利用宝塔面板"><a href="#6-2-利用宝塔面板" class="headerlink" title="6.2 利用宝塔面板"></a>6.2 利用宝塔面板</h3><p>发现还是有不少小伙伴习惯用宝塔面板，这边也贴一个宝塔面板的反代配置：</p>
<p>直接新建一个站点，不要数据库，不要 php，纯静态即可。</p>
<p>然后打开下面的配置，修改 Nginx 的配置。</p>
<p><a target="_blank" rel="noopener" href="https://img.laoda.de/i/2022/08/19/ov4xrt-2.webp" title="https://img.laoda.de/i/2022/08/19/ov4xrt-2.webp"><img src="file://C:/Users/25082/.config/joplin-desktop/resources/90b11e62bf5d4eb39071f38017dad1ba.webp?t=1696908655602">  
</a><br><a target="_blank" rel="noopener" href="https://img.laoda.de/i/2022/08/19/owbbkb-2.webp" title="https://img.laoda.de/i/2022/08/19/owbbkb-2.webp"><img src="file://C:/Users/25082/.config/joplin-desktop/resources/c16b6f2415ab438d87a5fc8ea6ee0826.webp?t=1696908655614">  
</a></p>
<p>代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  proxy_pass http://127.0.0.1:8090/;       </span><br><span class="line">  rewrite ^/(.*)$ /$1 break;</span><br><span class="line">  proxy_redirect off;</span><br><span class="line">  proxy_set_header Host $host;</span><br><span class="line">  proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">  proxy_set_header Upgrade-Insecure-Requests 1;</span><br><span class="line">  proxy_set_header X-Forwarded-Proto https;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此方法对 90% 的反向代理都能生效，然后就可以用域名来安装访问了。</p>
<p>有同学可能会问，为什么不直接用宝塔自带的反向代理功能。</p>
<p><a target="_blank" rel="noopener" href="https://img.laoda.de/i/2022/08/19/oxf800-2.webp" title="https://img.laoda.de/i/2022/08/19/oxf800-2.webp"><img src="file://C:/Users/25082/.config/joplin-desktop/resources/a587face6d63428e85548a49818f184f.webp?t=1696908655626">  
</a></p>
<p>也可以，不过咕咕自己之前遇到过当有多个网站需要反代的时候，在这边设置会报错的情况 &#x3D; &#x3D;</p>
<p>所以后来就不用了，直接用上面的方法来操作了。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>文档地址：<a target="_blank" rel="noopener" href="http://docs.halo.run/" title="http://docs.halo.run/"></a><a target="_blank" rel="noopener" href="http://docs.halo.run/" title="http://docs.halo.run/">http://docs.halo.run/</a><br>社区地址：<a target="_blank" rel="noopener" href="https://bbs.halo.run/" title="https://bbs.halo.run/"></a><a target="_blank" rel="noopener" href="https://bbs.halo.run/" title="https://bbs.halo.run/">https://bbs.halo.run/</a><br>官网地址：<a target="_blank" rel="noopener" href="https://halo.run/" title="https://halo.run/"></a><a target="_blank" rel="noopener" href="https://halo.run/" title="https://halo.run/">https://halo.run/</a><br>GitHub地址：<a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo" title="https://github.com/halo-dev/halo"></a><a target="_blank" rel="noopener" href="https://github.com/halo-dev/halo" title="https://github.com/halo-dev/halo">https://github.com/halo-dev/halo</a></p>
</article></div></main><div class="nav-wrap"><div class="nav"><button class="site-nav"><div class="navicon"></div></button><ul class="nav_items"><li class="nav_item"><a class="nav-page" href="/#Publications"> Publications</a></li><li class="nav_item"><a class="nav-page" href="/"> About</a></li><li class="nav_item"><a class="nav-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div><div class="cd-top"><i class="fa fa-arrow-up" aria-hidden="true"></i></div></div><footer id="page_footer"><div class="footer_wrap"><div class="copyright">&copy;2023 - 2024 by Li Hua</div><div class="theme-info">Powered by <a target="_blank" href="https://hexo.io" rel="nofollow noopener">Hexo</a> & <a target="_blank" href="https://github.com/PhosphorW/hexo-theme-academia" rel="nofollow noopener">Academia Theme</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery-pjax@latest/jquery.pjax.min.js"></script><script src="/js/main.js"></script></body></html>