<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>BaiYun</title><meta name="author" content="Li Hua"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><meta name="generator" content="Hexo 7.2.0"></head><body><header id="page_header"><div class="header_wrap"><div id="blog_name"><a class="blog_title" id="site-name" href="/">BaiYun</a></div><button class="menus_icon"><div class="navicon"></div></button><ul class="menus_items"><li class="menus_item"><a class="site-page" href="/#Publications"> Publications</a></li><li class="menus_item"><a class="site-page" href="/"> About</a></li><li class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div></header><main id="page_main"><div class="side-card sticky"><div class="card-wrap" itemscope itemtype="http://schema.org/Person"><div class="author-avatar"><img class="avatar-img" src="/themes/Academia/source/img/profile.jpg" onerror="this.onerror=null;this.src='/img/profile.png'" alt="avatar"></div><div class="author-discrip"><h3>Li Hua</h3><p class="author-bio">Your biography can be writed down here.</p></div><div class="author-links"><button class="btn m-social-links">Links</button><ul class="social-icons"><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-github" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-weixin" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="social-icon" href="/" target="_blank"><i class="fas fa-rss" aria-hidden="true"></i></a></li></ul><ul class="social-links"><li><a class="e-social-link" href="/" target="_blank"><i class="fas fa-graduation-cap" aria-hidden="true"></i><span>Google Scholar</span></a></li><li><a class="e-social-link" href="/" target="_blank"><i class="fab fa-orcid" aria-hidden="true"></i><span>ORCID</span></a></li></ul></div><a class="cv-links" href="/attaches/CV.pdf" target="_blank"><i class="fas fa-file-pdf" aria-hidden="true"><span>My Detail CV.</span></i></a></div></div><div class="page" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="page-title">docker常用命令</h2><article><p>1.docker或docker-help#查看docker自带的帮助信息  </p>
<p>启动类命令  </p>
<p>systemctl start docker              # 启动dockerQ  </p>
<p>systemctl stop docker              # 停l止docker  </p>
<p>systemctl restart docker           # 重启docker  </p>
<p>systemctl status docker           # 查看docker状态  </p>
<p>systemctl enable docker           # 将dockeri设为开机自启动  </p>
<p>docker info                            # 查看docker的各种信息，包括版本信息、镜像和容器数量等  </p>
<p>docker version                       # 查看docker版本Q信息  </p>
<p>docker images                       # 查看本地主机上已有的镜像</p>
<h2 id="一、管理命令"><a href="#一、管理命令" class="headerlink" title="一、管理命令"></a>一、管理命令</h2><ul>
<li><code>docker version</code>，查看docker客户端及服务端的版本信息；</li>
<li><code>docker info</code>，查看docker容器的详细信息，除了如上版本信息，还有镜像、容器数据卷、容器网络、Registry地址、物理配置等信息；</li>
<li><code>docker --help</code>，查看命令帮助；</li>
</ul>
<h2 id="二、镜像命令"><a href="#二、镜像命令" class="headerlink" title="二、镜像命令"></a>二、镜像命令</h2><ul>
<li><code>docker images</code>，查看本地所有顶层镜像（top level）信息的命令，按照创建时间倒序展示 ；<ul>
<li><code>docker images -a</code>，查看本地所有镜像信息的命令，包含中间层；</li>
<li><code>docker images -q</code>，只显示镜像ID；</li>
<li><code>docker images name:tag</code>，根据镜像name:tag来查看详细信息，不支持模糊搜索；</li>
</ul>
</li>
<li><code>docker history</code>，查看镜像的历史信息；<ul>
<li><code>docker history name:tag</code>，查看name:tag对应镜像的历史信息；</li>
</ul>
</li>
<li><code>docker search</code>，镜像搜索命令；<ul>
<li><code>docker search name</code>，根据镜像name进行搜索；</li>
<li><code>docker search --filter=stars=1000 name</code>，增加筛选条件，只查询stars数量在1000以上的；</li>
</ul>
</li>
<li><code>docker pull</code>，拉取镜像；<ul>
<li><code>docker pull name:tag</code>，根据name和tag拉取镜像；</li>
</ul>
</li>
<li><code>docker rmi</code>，移除镜像；<ul>
<li><code>docker rmi name:tag</code>，根据name和tag删除镜像，该镜像如果已经生成容器则不能删除；如果同一个镜像有多个tag，则只有当最后一个tag删除时才会删除镜像；</li>
<li><code>docker rmi -f name:tag</code>，强制删除镜像，如论是否创建容器；</li>
<li><code>docker rmi -f $&#123;docker images -q&#125;</code>，强制删除本地所有镜像；</li>
<li><code>docker rmi id</code>，根据镜像ID删除镜像，会先删除所有tag，然后删除镜像；</li>
</ul>
</li>
<li><code>docker build</code>，构建镜像；<ul>
<li><code>docker build -f container_path/dockerfile -t name:tag .</code>，指定dockerfile构建name:tag镜像，注意最后有一个.符号；</li>
</ul>
</li>
<li><code>docker save</code>，导出镜像，适用于需要将镜像安装到没有网络条件的服务器上的场景；<ul>
<li><code>docker save -o E:\httpd.zip httpd:latest</code>，将本地仓库中的httpd镜像导入到指定目录的指定文件中；</li>
</ul>
</li>
<li><code>docker load</code>，从指定文件中加载镜像，适用于在无网络条件的服务器上使用；<ul>
<li><code>docker load -i E:\httpd.zip</code>，从指定目录的指定文件中加载镜像到本地仓库中；</li>
</ul>
</li>
<li><code>docker tag</code>，给指定的镜像打tag，常用于指定别名，用于上传到远程镜像仓库场景；<ul>
<li><code>docker tag httpd:latest zhangxun/httd:latest</code>，一个镜像两个tag，删除任意一个都不会删除镜像，只有当所有tag都删除了才会真正删除镜像；但是如果删除镜像ID，则会先删除所有tag，再删除镜像；</li>
<li><code>docker tag id zhangxun/httpd:latest</code>，对指定ID的镜像打tag；</li>
<li><code>docker tag id test.tecentcloudcr.com/project/httpd:latest</code>，在新tag前面加上registry地址，表示后续将该镜像推送到指定的远程仓库，而非官方的Docker Hub；</li>
</ul>
</li>
<li><code>docker push</code>，将镜像推送到远程镜像仓库；<ul>
<li><code>docker push zhangxun/httpd:latest</code>，默认是推送到Docker Hub的远程仓库，一定要加上用户名前缀，否则无法推送，没有用户名前缀的都是官方镜像；</li>
<li><code>docker push test.tecentcloudcr.com/project/httpd:latest</code>，推送到指定的远程仓库；</li>
</ul>
</li>
</ul>
<h2 id="三、容器命令"><a href="#三、容器命令" class="headerlink" title="三、容器命令"></a>三、容器命令</h2><ul>
<li><code>docker run</code>，新建并启动容器命令；<ul>
<li><code>docker run -it name</code>，以交互方式新建启动容器，此处name为image的，非容器的，此时容器name随机；</li>
<li><code>docker run --name newname name</code>，新启动的容器指定名称为newname；</li>
<li><code>docker run -d name</code>，以守护方式启动容器；</li>
<li><code>docker run -it -v local_path:container_path name</code>，-v是指挂载数据卷，使得主机和容器地址挂载；</li>
<li><code>docker run --name name02 --volumes-from name01 name:tag</code>，启动name02容器，共享name01数据卷，name01称为数据卷容器；</li>
<li><code>docker run -it --network=bridge name</code>，启动容器使用某个指定的网络；</li>
</ul>
</li>
<li><code>docker start</code>，启动容器命令；<ul>
<li><code>docker start name</code>，这里的name是容器的name；</li>
</ul>
</li>
<li><code>docker restart</code>，重启容器命令；<ul>
<li><code>docker restart name</code>，这里的name是容器的name；</li>
</ul>
</li>
<li><code>docker stop</code>，停止容器命令；</li>
<li><code>docker kill</code>，杀掉正在运行中的某个容器；</li>
<li><code>docker rm</code>，移除容器；</li>
<li><code>docker ps</code>，查看容器命令；<ul>
<li><code>docker ps -q</code>，只显示容器ID；</li>
<li><code>docker ps -a</code>，显示正在运行和历史运行过的容器信息；</li>
<li><code>docker ps -l -n num</code>，显示最近创建的num个容器信息；<br>  -<code>docker container ps</code>和<code>docker container ls</code>的效果和<code>docker ps</code>完全一样；</li>
</ul>
</li>
<li><code>docker top</code>，查看容器中的进程信息；<ul>
<li><code>docker top name</code>，查看name容器中的进程信息；</li>
<li><code>docker container top name</code>效果完全一样。</li>
</ul>
</li>
<li><code>docker stats</code>，查看容器的运行情况资源占用情况；<ul>
<li><code>docker stats name</code>，查看某个容器的运行情况；</li>
<li><code>docker container stats</code>，效果完全一样；</li>
</ul>
</li>
<li><code>docker logs</code>， 查看容器中的日志；<ul>
<li><code>docker logs -f -t --tail=20 name</code>，查看name容器中的日志，-f表示跟踪日志输出，-t显示时间戳，–tail n，只显示最新的n条日志信息；</li>
</ul>
</li>
<li><code>docker inspect</code>，查看docker容器的详细信息；<ul>
<li><code>docker inspect name</code>，查看某个容器的详细信息；</li>
</ul>
</li>
<li><code>docker attach</code>，进入容器；<ul>
<li><code>docker attach name</code>，进入正在运行的容器name的命令行，显示该容器的运行信息；</li>
</ul>
</li>
<li><code>docker exec</code>，进入容器并执行命令；<ul>
<li><code>docker exec -it name cmd</code>，以交互方式进入容器name，同时执行cmd命令；</li>
</ul>
</li>
<li><code>docker commit</code>，打包生成镜像；<ul>
<li><code>docker commit -a=&quot;author&quot; -m=&quot;commit info&quot; name newname:tag</code>，写上作者、提交信息，并将当前容器打包为newname:tag的容器；</li>
</ul>
</li>
<li><code>docker cp</code>，容器与宿主机之间的数据拷贝；推荐使用数据卷的功能，所以这个命令实际中不常用；<ul>
<li><code>docker cp name:/container_path local_path</code>，将name容器中container_path路径下内容cp到宿主机的local_path路径下；</li>
<li><code>docker cp local_path name:/container_path</code>，将宿主机的local_path路径下内容cp到name容器中container_path路径下</li>
</ul>
</li>
<li><code>docker volume</code>，查看数据卷的信息；<ul>
<li><code>docker volume ls</code>，查看所有存在的数据卷信息；</li>
<li><code>docker volume inspect name</code>，查看数据卷的详细信息，比如对应主机的路径；</li>
<li><code>docker volume create name</code>，创建一个name名称的数据卷；</li>
</ul>
</li>
<li><code>docker network</code>，网络设置相关；<ul>
<li><code>docker network ls</code>，查看宿主机上docker的网络列表；</li>
<li><code>docker network inspect name</code>，根据name查看某个具体网络的信息；</li>
<li><code>docker network create --driver bridge --subnet 172.17.0.0/16 --gateway 172.17.0.1 yourNetName</code>，创建自定义网络，指定网络类型、子网范围以及网关地址；</li>
</ul>
</li>
<li><code>docker export</code>，导出容器；<ul>
<li><code>docker export -o /root/docker/httpd-01.tar container-id</code>，将某个容器（无论是否正在运行）导出到指定路径的指定文件；</li>
</ul>
</li>
<li><code>docker import</code>，导入容器；<ul>
<li><code>docker import /root/docker/httpd-01.tar - test/imagename:tag</code>，从指定路径导入容器，同时创建一个基于容器快照的镜像；</li>
</ul>
</li>
</ul>
</article></div></main><div class="nav-wrap"><div class="nav"><button class="site-nav"><div class="navicon"></div></button><ul class="nav_items"><li class="nav_item"><a class="nav-page" href="/#Publications"> Publications</a></li><li class="nav_item"><a class="nav-page" href="/"> About</a></li><li class="nav_item"><a class="nav-page" target="_blank" rel="noopener" href="https://phower.me"> Blog</a></li></ul></div><div class="cd-top"><i class="fa fa-arrow-up" aria-hidden="true"></i></div></div><footer id="page_footer"><div class="footer_wrap"><div class="copyright">&copy;2023 - 2024 by Li Hua</div><div class="theme-info">Powered by <a target="_blank" href="https://hexo.io" rel="nofollow noopener">Hexo</a> & <a target="_blank" href="https://github.com/PhosphorW/hexo-theme-academia" rel="nofollow noopener">Academia Theme</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery-pjax@latest/jquery.pjax.min.js"></script><script src="/js/main.js"></script></body></html>